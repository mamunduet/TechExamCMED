function remove(e,t){fileUpload.remove(e,t)}$(document).ready(function(){$("#statusimage").change(function(){var e=statusimage;switch(this.files[0].type.substring(0,5)){case image:e=statusimage;break;case audio:e=statusaudio;break;case video:e=statusvideo;break;default:return $("#statusimage").val(""),void alert("Invalid file !!!")}fileUpload.setData(e,this.files),$("#statusimage").val("")}),$("#statusvideo").change(function(){var e=statusvideo;switch(this.files[0].type.substring(0,5)){case image:e=statusimage;break;case audio:e=statusaudio;break;case video:e=statusvideo;break;default:return $("#statusvideo").val(""),void alert("Invalid file !!!")}fileUpload.setData(e,this.files),$("#statusvideo").val("")}),$("#statusaudio").change(function(){var e=statusaudio;switch(this.files[0].type.substring(0,5)){case image:e=statusimage;break;case audio:e=statusaudio;break;case video:e=statusvideo;break;default:return $("#statusaudio").val(""),void alert("Invalid file !!!")}fileUpload.setData(e,this.files),$("#statusaudio").val("")}),$("#uploadFile").click(function(){fileUpload.upload()}),fileUpload.initFileupload()});var fileUpload={initFileupload:function(){(!fileUpload.MultipleFiles||fileUpload.MultipleFiles.length<1)&&(fileUpload.MultipleFiles=[],fileUpload.enabledAllFileInput())},setData:function(e,t){(!fileUpload.MultipleFiles||fileUpload.MultipleFiles.length<1)&&(fileUpload.Type=e,fileUpload.MultipleFiles=[],fileUpload.disabledOtherFileInput(e));for(var a=0;a<t.length;a++)fileUpload.MultipleFiles.push(t[a]),fileUpload.previewFile(e,t[a],fileUpload.MultipleFiles.length-1)},upload:function(){$("#pleaseWaitDialog").removeClass("hide"),$("#pleaseWaitDialog").modal(),$.ajax({url:base_url+"/postStatus.do",type:"POST",dataType:"json",enctype:"multipart/form-data",cache:!1,contentType:!1,processData:!1,data:fileUpload.getData(),timeout:6e5,success:function(e){console.log("response : "+e.success)},complete:function(){$("#pleaseWaitDialog").modal("hide"),$("#pleaseWaitDialog").addClass("hide"),$("#media_container").empty(),fileUpload.MultipleFiles=[],fileUpload.enabledAllFileInput()},error:function(e,t,a){$("#bootstrap_alerts_cus").show(),$("#bootstrap_alerts_msg").text(e.responseText),console.log("error : "+e.responseText+"\n messae : "+t+"\n s : "+a)}})},getData:function(){var e,t=$("form")[0],a=new FormData;if($.each(t,function(e,t){t.name!==statusimage&&t.name!==statusvideo&&t.name!==statusaudio&&t.name!==liveNow&&a.append(t.name,t.value)}),fileUpload.MultipleFiles)for(e=0;e<fileUpload.MultipleFiles.length;e++)a.append(fileUpload.Type,fileUpload.MultipleFiles[e]);return a.append(liveNow,$("input[name=liveNow]:checked").val()),a},disabledOtherFileInput:function(e){switch($("#tr_album_name").show(),$("#tr_media_container").show(),e){case statusimage:$("#tr_media_duration").hide(),$("#statusvideo").prop("disabled",!0),$("#statusaudio").prop("disabled",!0),$("#span_video").addClass("disabled"),$("#span_audio").addClass("disabled");break;case statusvideo:$("#tr_media_duration").show(),$("#statusimage").prop("disabled",!0),$("#statusaudio").prop("disabled",!0),$("#span_image").addClass("disabled"),$("#span_audio").addClass("disabled");break;case statusaudio:$("#tr_media_duration").show(),$("#statusimage").prop("disabled",!0),$("#statusvideo").prop("disabled",!0),$("#span_video").addClass("disabled"),$("#span_image").addClass("disabled")}},enabledAllFileInput:function(){fileUpload.MultipleFiles=[],$("#albumName").val(""),$("#tr_album_name").hide(),$("#mediaDuration").val(""),$("#tr_media_duration").hide(),$("#tr_media_container").hide(),$("#media_container").empty(),$("#statusimage").prop("disabled",!1),$("#statusvideo").prop("disabled",!1),$("#statusaudio").prop("disabled",!1),$("#span_video").removeClass("disabled"),$("#span_image").removeClass("disabled"),$("#span_audio").removeClass("disabled")},previewFile:function(e,t,a){switch(e){case statusimage:var i=document.createElement("tr"),l=document.createElement("td"),s=document.createElement("img"),d=document.createElement("td"),o=document.createElement("button");i.id="tr"+a,o.innerHTML="Cancel",o.className="btn red",o.type="button",s.src=window.URL.createObjectURL(t),s.style.width="200px",s.style.height="150px",l.style.textAlign="center",l.style.verticalAlign="middle",d.style.textAlign="center",d.style.verticalAlign="middle",l.appendChild(s),i.appendChild(l),d.appendChild(o),i.appendChild(d),$(i).appendTo($("#media_container")),s.onload=function(){console.log(this.src),window.URL.revokeObjectURL(this.src)},o.setAttribute("onclick","remove("+a+", '"+e+"' )");break;case statusvideo:var i=document.createElement("tr"),l=document.createElement("td"),n=document.createElement("video"),u=document.createElement("source"),d=document.createElement("td"),o=document.createElement("button");i.id="tr"+a,o.innerHTML="Cancel",o.className="btn red",o.type="button",u.type="video/mp4",u.src=window.URL.createObjectURL(t),n.controls="controls",n.style.maxWidth="250px",n.style.maxHeight="250px",n.preload="metadata",l.style.textAlign="center",l.style.verticalAlign="middle",d.style.textAlign="center",d.style.verticalAlign="middle",n.appendChild(u),l.appendChild(n),i.appendChild(l),d.appendChild(o),i.appendChild(d),$(i).appendTo($("#media_container")),n.onloadeddata=function(){console.log(this.childNodes[0].src),window.URL.revokeObjectURL(this.childNodes[0].src)},o.setAttribute("onclick","remove("+a+", '"+e+"' )");break;case statusaudio:var i=document.createElement("tr"),l=document.createElement("td"),p=document.createElement("audio"),u=document.createElement("source"),d=document.createElement("td"),o=document.createElement("button");i.id="tr"+a,o.innerHTML="Cancel",o.className="btn red",o.type="button",u.type="audio/mp3",u.src=window.URL.createObjectURL(t),p.controls="controls",p.style.maxWidth="250px",p.style.maxHeight="250px",p.preload="metadata",l.style.textAlign="center",l.style.verticalAlign="middle",d.style.textAlign="center",d.style.verticalAlign="middle",p.appendChild(u),l.appendChild(p),i.appendChild(l),d.appendChild(o),i.appendChild(d),$(i).appendTo($("#media_container")),p.onloadeddata=function(){console.log(this.childNodes[0].src),window.URL.revokeObjectURL(this.childNodes[0].src)},o.setAttribute("onclick","remove("+a+", '"+e+"' )")}},remove:function(e,t){fileUpload.MultipleFiles.splice(e,1),$("#media_container").empty(),fileUpload.MultipleFiles.length<1&&fileUpload.enabledAllFileInput();for(var a=0;a<fileUpload.MultipleFiles.length;a++)fileUpload.previewFile(t,fileUpload.MultipleFiles[a],a);console.log(fileUpload.MultipleFiles.length)}},statusimage="statusimage",statusvideo="statusvideo",statusaudio="statusaudio",image="image",audio="audio",video="video",liveNow="liveNow";